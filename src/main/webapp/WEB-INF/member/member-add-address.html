<!DOCTYPE html>
<html lang="zxx">

<head>
<meta charset="utf-8">
<meta name="viewport"
	content="width=device-width, initial-scale=1, maximum-scale=1">

<title>一般會員新增地址</title>

<!-- Custom CSS -->
<link href="../Full_Resido/_html/assets/css/styles.css" rel="stylesheet">

<!-- chill-header css -->
<link href="../Full_Resido/_html/assets/css/chill-header.css" rel="stylesheet">

<!-- Custom Color Option -->
<link href="../Full_Resido/_html/assets/css/colors.css" rel="stylesheet">

<!-- Custom CSS - 不是模板提供的 -->
<link href="css/front-desk.css" rel="stylesheet">

</head>

<body class="blue-skin">

	<!-- ============================================================== -->
	<!-- Preloader - style you can find in spinners.css -->
	<!-- ============================================================== -->
	<div id="preloader">
		<div class="preloader">
			<span></span><span></span>
		</div>
	</div>

	<!-- ============================================================== -->
	<!-- Main wrapper - style you can find in pages.scss -->
	<!-- ============================================================== -->
	<div id="main-wrapper">

		<!-- ============================================================== -->
		<!-- Top header  -->
		<!-- ============================================================== -->
		<!-- Start Navigation -->
		<div class="header header-light head-shadow">
			<div class="container">
				<nav id="navigation" class="navigation navigation-landscape"></nav>
			</div>
		</div>

		<!-- End Navigation -->
		<div class="clearfix"></div>
		<!-- ============================================================== -->
		<!-- Top header  -->
		<!-- ============================================================== -->

		<!-- ============================ Page Title Start================================== -->
		<div id="page-title" class="page-title"></div>
		<!-- ============================ Page Title End ================================== -->

		<!-- ============================ User Dashboard ================================== -->
		<section class="bg-light">
			<div class="container-fluid">

				<div id="narrow-view" class="row"></div>

				<div class="row">
					<!-- ========================= 最大頁面的sidebar ========================= -->
					<div class="col-lg-3 col-md-12">

						<div class="simple-sidebar sm-sidebar" id="filter_search"></div>
					</div>

					<!-- ============================ Main Content ================================== -->
					<div class="col-lg-9 col-md-12">
						<!-- ======================== 頁面內容放這裡 ======================== -->
						<div class="dashboard-wraper">

							<!-- Location -->
							<div class="form-submit">
								<h3>新增地址</h3>
								<div class="submit-section">
									<div class="row">

										<div class="form-group col-md-6">
											<label>郵遞區號</label> <input type="text" id="zipcode"
												class="form-control simple" readonly>
										</div>

										<div class="form-group col-md-6">
											<label>縣市</label> <span class="input-required">*</span> <select
												id="city" class="form-control"></select>
										</div>

										<div class="form-group col-md-6">
											<label>鄉鎮市區</label> <span class="input-required">*</span> <select
												id="districts" class="form-control"></select>

										</div>

										<div class="form-group col-md-6">
											<label>地址</label> <span class="input-required">*</span> <input
												type="text" class="form-control" id="address">
										</div>

										<div class="form-group col-md-6">
											<label>標籤</label> <span style="font-size: 10px;">(例如：住家、公司、宿舍)</span>
											<input type="text" class="form-control" id="tag">
										</div>


									</div>
								</div>
							</div>

							<!-- Basic Information -->

							<div class="form-submit">
								<div class="submit-section">
									<div class="row">

										<div class="form-group col-lg-12 col-md-12"
											style="display: flex; justify-content: flex-end;">
											<button class="btn btn-primary rounded px-6" type="button" id="btn_upaddress">送出</button>
										</div>

									</div>
								</div>
							</div>

						</div>
					</div>
				</div>
			</div>
		</section>
		<!-- ============================ Main Content End ================================== -->

		<!-- ============================ Call To Action ================================== -->
		<section id="cta" class="bg-primary call-to-act-wrap"></section>
		<!-- ============================ Call To Action End ================================== -->

		<!-- ============================ Footer Start ================================== -->
		<footer id="footer" class="dark-footer skin-dark-footer"></footer>
		<!-- ============================ Footer End ================================== -->

		<!-- Log In Modal -->
		<div class="modal fade" id="login" tabindex="-1" role="dialog"
			aria-labelledby="registermodal" aria-hidden="true"></div>
		<!-- End Modal -->

		<!-- ============================ 目前還找不到這個按鍵 ============================ -->
		<a id="back2Top" class="top-scroll" title="Back to top" href="#"><i
			class="ti-arrow-up"></i></a>

	</div>
	<!-- ============================================================== -->
	<!-- End Wrapper -->
	<!-- ============================================================== -->
	<input type="hidden" id="address_member_id" value="">
	<input type="hidden" id="member_id" value="">

	<!-- ============================================================== -->
	<!-- All Jquery -->
	<!-- ============================================================== -->
	<script src="../Full_Resido/_html/assets/js/jquery.min.js"></script>
	<script src="../Full_Resido/_html/assets/js/popper.min.js"></script>
	<script src="../Full_Resido/_html/assets/js/bootstrap.min.js"></script>
	<script src="../Full_Resido/_html/assets/js/rangeslider.js"></script>
	<script src="../Full_Resido/_html/assets/js/select2.min.js"></script>
	<script src="../Full_Resido/_html/assets/js/jquery.magnific-popup.min.js"></script>
	<script src="../Full_Resido/_html/assets/js/slick.js"></script>
	<script src="../Full_Resido/_html/assets/js/slider-bg.js"></script>
	<script src="../Full_Resido/_html/assets/js/lightbox.js"></script>
	<script src="../Full_Resido/_html/assets/js/imagesloaded.js"></script>

	<script>
		// navbar load
		$("#navigation").load("fixed-member-navbar.html");
		$("#page-title").load("fixed-member-page-title.html");
		$("#narrow-view").load("fixed-member-narrow-view.html");
		$("#filter_search").load("fixed-member-sidebar.html");
		$("#cta").load("fixed-member-cta.html");
		$("#footer").load("fixed-member-footer.html");
		$("#login").load("fixed-member-login.html");
	</script>

	<script src="../Full_Resido/_html/assets/js/custom.js"></script>
	<!-- ============================================================== -->
	<!-- This page plugins -->
	<!-- ============================================================== -->

	<script>
		function openFilterSearch() {
			document.getElementById("filter_search").style.display = "block";
		}
		function closeFilterSearch() {
			document.getElementById("filter_search").style.display = "none";
		}
	</script>

	<script>
		$(document).ready(function() {
			$("#showbutton").click(function() {
				$("#showing").slideToggle("slow");
			});
		});
	</script>

	<!-- ============================地址選單的js============================== -->
	<script src="../member/js/address_form.js"></script>

<!-- 	<script src="../_html/assets/js/dropzone.js"></script> -->
	<script src="../Full_Resido/_html/assets/js/dropzone.js"></script>
	<!-- New Js -->
	<script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
	<script>
		const zipcode = document.getElementById("zipcode");
		const city = document.getElementById("city");
		const districts = document.getElementById("districts");
		const address = document.getElementById("address");
		const tag = document.getElementById("tag");

		document.querySelector('button#btn_upaddress').addEventListener('click', () => {
			console.log("送出按鈕觸發");
			event.preventDefault();
// 			if (address.value.length <= 0 ) {
// 				Swal.fire({
// 					icon: "error",
// 					title: "Oh...糟糕",
// 					text: "地址必須輸入唷~",
// 				});
// 				return;
// 			}



			fetch('memberaddress', {
				method: 'POST',
				headers: {
					'Content-Type': 'application/json'
				},
				body: JSON.stringify({
					member_id: member_id.value,
// 					zipcode: zip_code.value,
					zip_code: zipcode.value,
// 					city: city_id.value,
					city_id: city.value,
// 					districts: district_id.value,
					district_id: districts.value,
					address: address.value,
					tag: tag.value,
				})
			})
				// console.log(resp)
				.then(resp => {
					return resp.json();
				})
				.then(body => {
					const { successful, errMsg } = body;
					if (successful) {
					        Swal.fire({
					            icon: "success",
					            title: "成功",
					            text: "恭喜您，新增地址成功囉！",
					        });
					    } else {
					        Swal.fire({
					            icon: "error",
					            title: "Oh...糟糕",
					            text: errMsg || "發生錯誤，請稍後再試。",
					        });
					    }
				});
		});
	</script>

</body>

</html>