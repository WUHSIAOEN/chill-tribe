<!DOCTYPE html>
<html lang="zxx">

<head>
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">

	<title>ChillTribe - 更改密碼</title>

	<!-- Custom CSS -->
	<link href="../Full_Resido/_html/assets/css/styles.css" rel="stylesheet">

	<!-- chill-header css -->
	<link href="../Full_Resido/_html/assets/css/chill-header.css" rel="stylesheet">

	<!-- Custom Color Option -->
	<link href="../Full_Resido/_html/assets/css/colors.css" rel="stylesheet">

	<!-- Custom CSS - 不是模板提供的 -->
	<link href="css/front-desk.css" rel="stylesheet">

</head>

<body class="blue-skin">

	<!-- ============================================================== -->
	<!-- Preloader - style you can find in spinners.css -->
	<!-- ============================================================== -->
	<div id="preloader">
		<div class="preloader">
			<span></span><span></span>
		</div>
	</div>

	<!-- ============================================================== -->
	<!-- Main wrapper - style you can find in pages.scss -->
	<!-- ============================================================== -->
	<div id="main-wrapper">

		<!-- ============================================================== -->
		<!-- Top header  -->
		<!-- ============================================================== -->
		<!-- Start Navigation -->
		<div class="header header-light head-shadow">
			<div class="container">
				<nav id="navigation" class="navigation navigation-landscape"></nav>
			</div>
		</div>

		<!-- End Navigation -->
		<div class="clearfix"></div>
		<!-- ============================================================== -->
		<!-- Top header  -->
		<!-- ============================================================== -->

		<!-- ============================ Page Title Start================================== -->
		<div id="page-title" class="page-title"></div>
		<!-- ============================ Page Title End ================================== -->

		<!-- ============================ User Dashboard ================================== -->
		<section class="bg-light">
			<div class="container-fluid">

				<div id="narrow-view" class="row"></div>

				<div class="row">
					<!-- ========================= 最大頁面的sidebar ========================= -->
					<div class="col-lg-3 col-md-12">

						<div class="simple-sidebar sm-sidebar" id="filter_search"></div>
					</div>

					<!-- ============================ Main Content ================================== -->
					<div class="col-lg-9 col-md-12">
						<!-- ======================== 頁面內容放這裡 ======================== -->
						<div class="dashboard-wraper">
							<!-- Basic Information -->
							<div class="form-submit">
								<h4>更改密碼</h4>
								<p>為了保護您帳號的安全，請不要分享您的密碼給其他人</p>
								<div class="submit-section">
									<div class="row">
										<div class="form-group col-md-6">
											<label>新的密碼</label> <span class="input-required">*</span> <input
												type="password" class="form-control" id="newpassword">
										</div>

										<div class="form-group col-md-6">
											<label>確認密碼</label> <span class="input-required">*</span> <input
												type="password" class="form-control" id="check_password">
										</div>

										<div class="form-submit">
											<div class="submit-section">
												<div class="row">

													<div class="form-group col-lg-12 col-md-12"
														style="display: flex; justify-content: flex-end;">
														<button class="btn btn-primary rounded px-3" type="button"
															id="btn_edit">確認送出</button>
													</div>

												</div>
											</div>
										</div>

										<h6>修改密碼注意事項</h6>
										<pre>
密碼格式要求：

至少包含 6 個字符，建議使用 12 個或更多字符。
必須包含以下四種類型的字符中的至少三種：
英文字母（大小寫）
數字（0-9）
特殊字符（例如：!@#$%^&*()）

避免常見弱密碼：

避免使用「12345678」、「password」、「qwerty」等容易被破解的密碼。
避免重複使用舊密碼。
                        </pre>

									</div>
								</div>
							</div>
						</div>
					</div>
				</div>
			</div>
		</section>
		<!-- ============================ Main Content End ================================== -->

		<!-- ============================ Call To Action ================================== -->
		<section id="cta" class="bg-primary call-to-act-wrap"></section>
		<!-- ============================ Call To Action End ================================== -->

		<!-- ============================ Footer Start ================================== -->
		<footer id="footer" class="dark-footer skin-dark-footer"></footer>
		<!-- ============================ Footer End ================================== -->

		<!-- Log In Modal -->
		<div class="modal fade" id="login" tabindex="-1" role="dialog" aria-labelledby="registermodal"
			aria-hidden="true"></div>
		<!-- End Modal -->

		<!-- ============================ 目前還找不到這個按鍵 ============================ -->
		<a id="back2Top" class="top-scroll" title="Back to top" href="#"><i class="ti-arrow-up"></i></a>

	</div>
	<!-- ============================================================== -->
	<!-- End Wrapper -->
	<!-- ============================================================== -->


	<!-- ============================================================== -->
	<!-- All Jquery -->
	<!-- ============================================================== -->
	<script src="../Full_Resido/_html/assets/js/jquery.min.js"></script>
	<script src="../Full_Resido/_html/assets/js/popper.min.js"></script>
	<script src="../Full_Resido/_html/assets/js/bootstrap.min.js"></script>
	<script src="../Full_Resido/_html/assets/js/rangeslider.js"></script>
	<script src="../Full_Resido/_html/assets/js/select2.min.js"></script>
	<script src="../Full_Resido/_html/assets/js/jquery.magnific-popup.min.js"></script>
	<script src="../Full_Resido/_html/assets/js/slick.js"></script>
	<script src="../Full_Resido/_html/assets/js/slider-bg.js"></script>
	<script src="../Full_Resido/_html/assets/js/lightbox.js"></script>
	<script src="../Full_Resido/_html/assets/js/imagesloaded.js"></script>
	<script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>

	<script>
		// navbar load
		$("#navigation").load("fixed-member-navbar.html");
		$("#page-title").load("fixed-member-page-title.html");
		$("#narrow-view").load("fixed-member-narrow-view.html");
		$("#filter_search").load("fixed-member-sidebar.html");
		$("#cta").load("fixed-member-cta.html");
		$("#footer").load("fixed-member-footer.html");
		$("#login").load("fixed-member-login.html");
	</script>

	<script src="../Full_Resido/_html/assets/js/custom.js"></script>
	<!-- ============================================================== -->
	<!-- This page plugins -->
	<!-- ============================================================== -->

	<script>
		function openFilterSearch() {
			document.getElementById("filter_search").style.display = "block";
		}
		function closeFilterSearch() {
			document.getElementById("filter_search").style.display = "none";
		}
	</script>

	<script>
		$(document).ready(function () {
			$("#showbutton").click(function () {
				$("#showing").slideToggle("slow");
			});
		});
	</script>

	<script>
		const password = document.querySelector('#newpassword');
		const cpassword = document.querySelector('#check_password');


		$('#btn_edit').on("click", function () {
			console.log("修改密碼按鈕觸發");
			if (password.value !== cpassword.value) {
				Swal.fire({
					icon: "error",
					title: "Oh...糟糕",
					text: "密碼與確認密碼不同",
				});
			};

			fetch(`http://localhost:8080/chill-tribe/member/membereditpassword`, {
				method: 'PUT',
				headers: {
					'Content-Type': 'application/json'
				},
				body: JSON.stringify({
					password: password.value,
					memberid: member_id.value
				}),

			})
				.then(resp => {
					return resp.json();
				})
				.then(body => {
					const { successful, errMsg } = body;
					if (body.successful) {
						console.log("恭喜，密碼修改成功囉！！！");
						Swal.fire({
							icon: "success",
							title: "恭喜",
							text: "密碼修改成功囉！",
						});
					}else {
						console.log("OH~NO...您密碼修改失敗了！！！");
						// 				 alert('OH~不，個資修改失敗...');
						Swal.fire({
							icon: "error",
							title: "Oh...糟糕",
							text: "密碼修改失敗...",
						});
					}
				});
		});


	</script>

</body>

</html>